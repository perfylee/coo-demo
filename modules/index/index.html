<div class="index">
    <div class="index-header ">
       <div class="date">
           <span class="day">{{top.day}}</span>
           <span class="month">{{top.month}}.</span>
       </div>

        <div class="slogan">
            <!--<i class="icon certificate"></i>-->
            <span>{{top.slogan}}</span>
        </div>

        <!--
        <div class="tools">
            <a href="#"><i class="icon alarm outline"></i></a>
            <a href="#"><i class="icon ellipsis horizontal"></i></a>
        </div>
        -->
    </div>

    <div class="index-service">
        <div class="item item{{item.sort}}" ng-repeat="item in category.items" ng-click="category.select(item)">
            <span class="name">{{item.name}}</span>
            <span class="sub">{{item.en}}</span>
        </div>

    </div>

    <div class="index-main">

        <div class="item" ng-click="car.modalVisible = true">
            <div class="name">
                <i class="icon car"></i>
                <span> {{appointment.car.CarNum || '-'}}</span>
            </div>
            <span class="sub">
                <span>{{appointment.car.CarBrand || '-'}} {{appointment.car.CarModel }}</span>
            </span>
        </div>

        <div class="item" ng-click="store.modalVisible = true">
            <div class="name">
                <i class="icon building"></i>
                <span>
                    {{appointment.store.StoreName || '-'}}
                    <div class="floating ui label small {{appointment.store.Tag == '最常去'?'orange':'green'}}" ng-if="appointment.store!=null && appointment.store.Tag!=null && appointment.store.Tag!=''">{{appointment.store.Tag}}</div>
                </span>
            </div>
            <div class="sub">
                <span>{{appointment.store.StoreAddress || '-'}}</span>
            </div>
            <div class="sub orange">
                <span>{{appointment.service.name || '-'}} 费用 {{appointment.service.price || '-'}}</span>
            </div>
        </div>

        <div class="item" ng-click="time.modalVisible = true">
            <div class="name">
                <i class="icon time"></i>
                <span>  {{appointment.time.AccurateStartTime | shortTime}}</span>
            </div>
            <div class="sub times">

                <span  class="{{appointment.time.AccurateStartTime == item.AccurateStartTime ?'selected':''}}" ng-click="time.quickSelect(item,$event)" ng-repeat="item in time.quickItems ">
                    {{ item.AccurateStartTime | shortTime:1}}
                </span>
            </div>
        </div>

    </div>

    <div class="index-start" ng-click="appointment.submitVisible = true">
        <button class="ui green button big fluid">
            一键预约
        </button>
    </div>

    <div class="index-footer">

        <div class="item" ng-click="appointment.test()">
            <i class="icon empty heart"></i>
            <span class="name">优惠活动</span>
            <div class="floating ui red label small">2</div>
        </div>

        <a class="item" href="#!/index/setting">
            <i class="icon setting"></i>
            <span class="name">默认设置</span>
        </a>

        <div class="item">
            <i class="icon file text outline"></i>
            <span class="name">我的订单</span>
        </div>

    </div>

    <coo-loader show="loaderVisible"></coo-loader>

</div>


<coo-modal size="small" show="appointment.submitVisible">
    <i class="icon close"></i>
    <div class="title">
        <i class="icon add to cart"></i> 预约订单确认
    </div>
    <div class="description">
        <div class="ui header">{{user.CustomerName}} {{user.Sex}}：</div>
        <p>您的爱车 {{appointment.car.CarNum}} 预约了以下服务，请确认</p>

        <div class="ui list">
            <div class="item">
                <i class="icon time"></i>
                <div class="content">{{appointment.time.AccurateStartTime | shortTime}}</div>
            </div>
            <div class="item">
                <i class="icon building"></i>
                <div class="content">{{appointment.store.StoreName || '-'}}</div>
            </div>
            <div class="item">
                <i class="icon user"></i>
                <div class="content">
                    {{appointment.service.name}} 服务，预计费用 {{appointment.service.price || '-'}} 元
                </div>
            </div>
        </div>
    </div>
    <div class="buttons">
        <button class="ui button fluid close" ng-click="appointment.submitVisible = false">
            容我三思
        </button>
        <button class="ui green button fluid"  ng-click="appointment.submit()">
            确认
        </button>
    </div>

</coo-modal>

<coo-modal size="large" show="car.modalVisible">
    <i class="icon close"></i>
    <div class="title">
        <i class="icon car"></i> 选择车辆
    </div>
    <div class="description">
        <div class="ui list car-selector">
            <div class="item car {{item.CarGuid == appointment.car.CarGuid?'selected':''}}" ng-repeat="item in car.items" ng-click="car.select(item)">
                <div class="pn">{{item.CarNum}}</div>
                <div class="model">{{item.CarBrand}} {{item.CarModel}}</div>
                <i class="icon check mark"></i>
            </div>
        </div>
    </div>

</coo-modal>

<coo-modal size="large" show="time.modalVisible">
    <i class="icon close"></i>
    <div class="title">
        <i class="icon time"></i> 选择时间
    </div>
    <div class="description">
        <div class="ui list time-selector">
            <div class="item" ng-if="time.items[index].length > 0" ng-repeat="(index,dayItems) in time.items">
                <div class="ui {{['green','blue','orange'][index]}} label title">{{['今天','明天','后天'][index]}}</div>
                <div class="times">
                    <span ng-repeat="item in time.items[index]" class="{{item.IsUsed != 0?'used':(item.AccurateStartTime == appointment.time.AccurateStartTime?'selected':'')}}" ng-click="time.select(item)">
                        {{ item.AccurateStartTime | shortTime:2}}
                    </span>
                </div>
            </div>
        </div>
    </div>

</coo-modal>

<coo-modal size="large" show="store.modalVisible">
    <i class="icon close"></i>
    <div class="title">
        <i class="icon building outline"></i> 选择门店
    </div>

    <div class="description">
        <div class="ui green secondary pointing menu two item ">
            <a class="item {{store.tabIndex == 'listView'?'active':''}}" ng-click="store.tabIndex = 'listView'">所有门店 </a>
            <a class="item {{store.tabIndex == 'mapView'?'active':''}}" ng-click="store.tabIndex = 'mapView'">地图模式</a>
        </div>

        <div  class="shop-selector" ng-show="store.tabIndex == 'listView'">
            <div class="shop {{item.StoreID == appointment.store.StoreID ?'selected':''}}" ng-click="store.select(item)" ng-repeat="item in store.items">
                <img ng-src="{{item.StoreImage}}">

                <a class="ui left ribbon label {{item.Tag == '最常去'?'orange':'green'}}"  ng-if="item.Tag != null && item.Tag != ''">{{item.Tag}}</a>

                <div class="name">{{item.StoreName}}</div>
                <div class="address">{{item.StoreAddress}}</div>
                <div class="stars">
                    <i class="icon star orange"></i>
                    <i class="icon star orange"></i>
                    <i class="icon star orange"></i>
                </div>
                <div class="addition">
                    <div>
                        <i class="icon marker"></i>
                        {{item.Distance}}
                    </div>
                    <div>
                        <i class="icon comment"></i>
                        {{item.TotalComments}}
                    </div>
                    <div>
                        <i class="icon marker"></i>
                        {{item.StoreScale}}
                    </div>
                </div>
            </div>
        </div>


        <div ng-show="store.tabIndex == 'mapView'">
            地图
        </div>

    </div>

</coo-modal>



